PROMPT_GEN_STRUCTURE = """
你是一位专业的文档架构师和内容分析专家，特别擅长处理社交媒体对话内容的结构化整理。
"""

PROMPT_GEN_DOC_STRUCTURE = """
您是一位资深的文档架构设计专家。请基于输入内容，设计一个专业的文档框架。

# 背景
用户需求：
{user_input}

聊天记录：
{chat_records}

# 分析要求
1. 提炼核心主题和关键问题
2. 考虑未见内容的扩展性
3. 设计主要章节结构
4. 确保结构逻辑性和完整性

# 输出要求
1. 章节结构
- 使用清晰的章节编号
- 每章节限制25字以内
- 章节说明限制50字以内
- 只生成单层级大纲

2. 写作建议
- 每个章节的写作重点和风格建议
- 整体文档的风格定位和语言基调

# 输出格式
<outline>
一、[章节名称]
[章节说明]

二、[章节名称]
[章节说明]

...
</outline>

<suggestions>
[建议]
</suggestions>
"""


PROMPT_GET_INFO = """
您是一个专业的信息分析师。请从以下聊天记录中提取有助于撰写文档的关键信息。

# 文档大纲：
{outline}

# 聊天记录：
{chat_records}

# 思维步骤
1. 大纲分析
   - 仔细阅读每个章节的标题和说明
   - 理解每个章节需要的信息类型
   - 建立章节与信息的对应关系框架

2. 信息扫描
   - 浏览整个聊天记录
   - 标记包含关键信息的对话片段
   - 初步判断信息的重要性和相关性

3. 深度提取
   - 逐个分析已标记的对话片段
   - 提取符合要求的具体信息
   - 确认信息的完整性和准确性

4. 信息补全
   - 检查每个信息点的完整性
   - 回溯对话寻找缺失的关键信息

4. 分类整理
   - 将信息按章节分类
   - 检查信息的重复和冲突

5. 质量检查
   - 验证每条信息的来源
   - 标注信息的确定性程度
   - 检查是否满足提取要求

# 提取要求
1. 信息完整性
   - 保留所有具体活动/事件的完整信息
   - 包含时间、地点、参与方式等具体细节
   - 避免过度概括

2. 信息分类
   - 按大纲章节严格分类
   - 同类信息分开条目列举，不要合并
   - 相似活动也要分别列出

3. 信息溯源
   - 标注信息来源（发言人或对话片段）
   - 标注信息的时效性
   - 区分确定信息和待确认信息

注意:
- 只提取与文档大纲相关的信息
- 宁可少提，也要确保提取的信息准确、相关。



输出格式：
<info_start>
一、[章节名称]
[信息]

二、[章节名称]
[信息]

...
<info_end>
"""

PROMPT_GEN_END_DOC = """
您是一个专业的技术文档撰写专家。请基于以下信息撰写指定章节的内容。

# 输入信息
文档大纲：
{outline}

指定章节的关键信息：
{aggregated_info}

# 思维步骤：
1. 信息分析
- 仔细理解章节主题和核心要点
- 分析所提供信息的完整性和重要性
- 识别信息之间的逻辑关联

2. 内容规划
- 确定你需要撰写的章节的表达结构
- 规划信息分布，避免重复和遗漏
- 设计合适的展示形式（文本/表格/列表）

3. 文档撰写
- 按大纲结构组织内容
- 使用专业且清晰的语言
- 在适当位置引用原始对话作为支撑
- 通过段落转换保持文档流畅性

4. 优化完善
- 检查是否完整覆盖所有关键信息
- 优化内容的展示形式
- 确保文档结构清晰、重点突出

# 撰写要求：
1. 只关注指定章节的内容撰写
2. 整合所有关键信息
3. 适当参考suggestions中的写作建议
4. 保持叙述流畅性，合理运用表格、列表等形式优化展示
5. 适当引用原始对话以增加可信度
6. 使用markdown语法

输出格式：
<content>
[章节内容]
</content>

请基于以上思维步骤，生成一份专业、完整的章节内容。
"""


# PROMPT_GEN_DOC_STRUCTURE = """
# 你是一位资深的文档架构设计专家，请基于以下输入内容，设计一个专业的文档框架。

# # 输入内容
# 用户需求：
# {user_input}

# 对话记录：
# {chat_records}

# # 任务要求
# 1. 分析输入内容，提炼核心主题
# 2. 设计合理的章节结构，注意输入的是部分聊天记录，因此要考虑包容性
# 3. 为每个章节提供明确的写作目标和指导
# 4. 确保整体结构逻辑连贯

# # 输出格式
# 请严格按照以下格式输出每个章节的信息：

# <task_start>
# 编号: [使用数字编号，如 1、2、3 等]
# 标题: [章节标题]
# 核心内容: [本章节的核心内容]
# 指导: [简要的写作建议，包括内容组织方式、重点关注事项、写作风格等]
# 格式: [内容应采用的组织形式的建议，提示：由于输出限制，请勿包含图片相关的格式要求]
# <task_end>
# """

# PROMPT_GEN_DOC_CONTENT = """
# 你是一位专业文档撰写者。请基于以下任务说明和聊天记录，生成该章节的详细内容：
# # 任务说明：
# {task_instruction}
# # 聊天记录：
# {chat_records}

# 重要原则：
# 1. 严格基于聊天记录
#    - 只能使用聊天记录中明确存在的信息
#    - 如果任务说明中要求的内容在聊天记录中找不到，必须标注"待补充"
#    - 禁止通过推理或假设来填补信息空缺

# 2. 信息处理要求：
#    - 禁止添加任何聊天记录之外的内容
#    - 对于模糊或不确定的信息，必须标注"待确认"
#    - 数字、日期、专有名词等必须与聊天记录完全一致

# 3. 任务说明与记录不匹配处理：
#    - 当任务说明的要求与聊天记录内容不匹配时，优先遵循聊天记录
#    - 清楚标注未能满足的任务要求为"待补充"
#    - 不得为了满足任务要求而进行内容臆测


# 输出格式：
# [章节标题]
# [章节内容]


# # 内容自我审查清单：
# 在完成内容撰写后，请逐项检查：
# - [ ] 所有陈述都能在聊天记录中找到对应依据
# - [ ] 没有添加任何推测性的内容
# - [ ] 所有数字和具体信息都来自原始记录
# - [ ] 已标注所有"待补充"或"待确认"的内容
# 自我审查完毕后，请在文档末尾添加以下内容：
# <self_check_end>
# 自我审查完毕
# </self_check_end>

# """


# PROMPT_DOC_VERSION_CONTROLLER = """
# 你是一个专业的文档更新助手。请基于新的聊天记录，生成对文档的更新操作序列。

# # 输入内容
# 当前文档：
# {base_document}

# 新增聊天记录：
# {new_chat_records}

# 更新说明：
# {task_instruction}

# # 思维步骤
# 在生成更新操作前，请按以下步骤进行分析：

# 1. 文档分析
# - 梳理当前文档的主要结构和层次关系
# - 标记需要关注的关键段落和内容

# 2. 差异识别  
# - 对比新聊天记录与现有文档
# - 提取新增/变更/删除的信息点
# - 确认哪些是确定性的改动

# 3. 操作规划
# - 为每个差异选择合适的操作类型
# - 设计准确的选择器路径
# - 规划操作的执行顺序

# 4. 合理性验证
# - 检查选择器的准确性
# - 验证操作序列的逻辑性
# - 确认是否符合更新说明

# # 输出格式
# 请使用以下格式描述更新操作：

# <UPDATES>
# [操作1]
# TYPE: [INSERT|DELETE|REPLACE|MOVE]
# SELECTOR: [Markdown选择器]
# CONTENT: [新内容，仅INSERT和REPLACE需要]
# NEW_SELECTOR: [新位置，仅MOVE需要]
# REASON: [修改原因]

# [操作2]
# ...
# </UPDATES>

# # Markdown选择器说明
# 1. 使用 > 表示层级：如 "## 产品特性 > ### 基础功能 > - 性能指标"
# 2. 使用 :nth(n) 表示同级第n个：如 "## 产品特性 > - :nth(2)"
# 3. 使用 {{}} 包含关键词匹配：如 "## 产品特性 > - {{高性能}}"
# 4. 使用 [] 包含属性：如 "## 产品特性[id=performance]"

# # 示例
# <UPDATES>
# [操作1]
# TYPE: REPLACE
# SELECTOR: ## 产品特性 > - {{高性能}}
# CONTENT: - 超高性能：支持每秒处理100万请求
# REASON: 根据聊天记录更新了性能指标的具体数值

# [操作2]
# TYPE: INSERT
# SELECTOR: ## 产品特性 > ### 基础功能
# CONTENT: - 自动伸缩：支持集群自动扩容
# REASON: 增加了新的特性说明
# </UPDATES>

# # 注意事项
# 1. 严格遵守事实，只使用聊天记录中明确提供的信息
# 2. 每个操作都必须提供明确的理由
# 3. 选择器必须准确定位到需要修改的位置
# 4. 操作序列要保证可以按顺序执行
# 5. 如果没有要更新的内容，请输出：
# <UPDATES>
# None
# </UPDATES>
# """